components:
  schemas:
    State:
      type: string
      enum: [started, stopped]

    StateRequest:
      type: object
      properties:
        chaos:
          $ref: "#/components/schemas/StateRequest.Chaos"

    StateRequest.Chaos:
      type: object
      properties:
        drop_frames:
          $ref: "#/components/schemas/StateRequest.Chaos.DropFrames"
        background_traffic:
          $ref: "#/components/schemas/StateRequest.Chaos.BackgroundTraffic"

    StateRequest.Chaos.BackgroundTraffic:
          type: object
          properties:
            flow_names:
              description: >-
                The names of flows to which the transmit state will be applied to.
                If the list of flow_names is empty or null the state will be applied
                to all configured flows.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/background_traffic.yaml/components/schemas/Flow/properties/name'
            state:
              x-include:
              - "#/components/schemas/State"

    StateRequest.Chaos.DropFrames:
          type: object
          properties:
            config_names:
              description: >-
                The names of the drop frams configs to which the transmit state will be applied to.
                If the list is empty or null the state will be applied to all drop frames entries.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/chaos.yaml/components/schemas/DropFrames/properties/name'
            state:
              x-include:
              - "#/components/schemas/State"


    StateResponse:
      type: object
      properties:
        chaos:
          $ref: "#/components/schemas/StateResponse.Chaos"

    StateResponse.Chaos:
      type: object
      properties:
        drop_frames:
          $ref: "#/components/schemas/StateResponse.Chaos.DropFrames"
        background_traffic:
          $ref: "#/components/schemas/StateResponse.Chaos.BackgroundTraffic"

    StateResponse.Chaos.BackgroundTraffic:
          type: object
          properties:
            started:
              description: >-
                The names of the started flows.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/background_traffic.yaml/components/schemas/Flow/properties/name'
            stopped:
              description: >-
                The names of the stopped flows.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/background_traffic.yaml/components/schemas/Flow/properties/name'

    StateResponse.Chaos.DropFrames:
          type: object
          properties:
            started:
              description: >-
                The names of the started drop frames experiments.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/chaos.yaml/components/schemas/DropFrames/properties/name'
            stopped:
              description: >-
                The names of the stopped drop frames experiments.
              type: array
              items:
                type: string
              x-constraint:
              - '../chaos/chaos.yaml/components/schemas/DropFrames/properties/name'
    